<!doctype html>
<html lang="en" ng-app="dirApp">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="../Libraries/angular.js"></script>
    <script>
        /**
         * Lesson 18, Classwork, Serhii Yakubovych
         */
        /**
         * ###Задача 1
         * Создайте директиву, которая создает кнопку, при нажатии на которую запускается счетчик
         * (на экран начинают выводиться числа в возрастающей последовательности с интервалом в 1 с).
         */
        angular.module("dirApp", [])
            .directive("counterButton", function() {
                return {
                    scope: true,
                    template: "<button ng-click='startCounter()'>Start counter</button> <span>{{count}}</span>",
                    controller: function($scope, $interval) {
                        $scope.count = 0;
                        let isCounterStarted = false;

                        $scope.startCounter = function() {
                            if (isCounterStarted) {
                                return;
                            }
                            isCounterStarted = true;
                            $interval(() => ++$scope.count, 1000);
                        };
                    }
                };
            });
    </script>
</head>
<body>
    <section>
        <counter-button></counter-button>
    </section>
</body>
</html>